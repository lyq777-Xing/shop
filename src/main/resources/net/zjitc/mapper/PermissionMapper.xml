<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.zjitc.mapper.PermissionMapper">
    <select id="findPermissionList" resultType="net.zjitc.entity.vo.PermissionVo">
        SELECT
            p.`ps_id` AS id,
            p.`ps_name` AS authName,
            p.`ps_level` AS LEVEL,
            p.`ps_pid` AS pid,
            pa.`ps_api_path` AS path
        FROM
            sp_permission AS p,
            sp_permission_api AS pa
        WHERE
            p.`ps_id` = pa.`ps_id`
    </select>
    <select id="findPermissionTree" resultType="net.zjitc.entity.vo.PermissionVo" parameterType="java.lang.Integer">
        SELECT
            p.`ps_id` AS id,
            p.`ps_name` AS authName,
            p.`ps_level` AS LEVEL,
            p.`ps_pid` AS pid,
            pa.`ps_api_path` AS path
        FROM
            sp_permission AS p,
            sp_permission_api AS pa
        WHERE
            p.`ps_id` = pa.`ps_id`
          AND
            p.`ps_level` = #{level}
    </select>
</mapper>